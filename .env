# Spark Streaming (access)
KAFKA_BOOTSTRAP_SERVERS=kafka:9092
KAFKA_TOPIC_ACCESS=web-logs
WINDOW_DURATION="10 seconds"
WATERMARK="2 minutes"
CHECKPOINT_DIR=file:///tmp/spark-checkpoints

# Spark Streaming (error)
KAFKA_TOPIC_ERROR=web-errors
ERROR_SAMPLE_LIMIT=5
CHECKPOINT_DIR_ERROR=file:///tmp/spark-checkpoints-error

# InfluxDB
INFLUX_URL=http://influxdb:8086
INFLUX_TOKEN=-0y5NOO-WTMQCxgvcI7es3B-6szqK7H1aNhCJekJas-IFv-et2dtBxf1vcEaiQNHjLJVC_Xp6BJg7r1BjS67aQ==
INFLUX_ORG=primary
INFLUX_BUCKET=logs
RETENTION_HOURS=168
ADMIN_USER=admin
ADMIN_PASSWORD=admin12345

# Tags & thresholds
ENV_TAG=dev
ERROR_RATE_THRESHOLD=0.1
IP_SPIKE_THRESHOLD=5  # Giảm từ 50 xuống 5 để test với healthcheck traffic
SCAN_DISTINCT_PATHS_THRESHOLD=3  # Giảm từ 20 xuống 3

# Spark Resource Configuration (optimized for concurrent jobs)
SPARK_EXECUTOR_CORES=1
SPARK_CORES_MAX=1              # Giảm từ 2 xuống 1 để cho phép 2 jobs chạy song song
SPARK_EXECUTOR_MEMORY=512m     # Giảm từ 1g xuống 512m để tiết kiệm RAM
SPARK_DRIVER_MEMORY=512m       # Tăng từ 256m lên 512m (minimum requirement ~471MB)
SPARK_MEM_OVERHEAD=128m        # Giảm từ 256m xuống 128m
